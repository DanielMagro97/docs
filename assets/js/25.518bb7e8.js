(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{225:function(a,s,t){"use strict";t.r(s);var n=t(0),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"stake-management"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stake-management"}},[a._v("#")]),a._v(" Stake Management")]),a._v(" "),t("p",[a._v("For node operators the "),t("code",[a._v("oasis-node")]),a._v(" binary offers a command line interface for\nvarious staking token operations.")]),a._v(" "),t("p",[a._v("The following commands are intended to be run "),t("strong",[a._v("online")]),a._v(":")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("oasis-node stake info")]),a._v(" shows the token information,")]),a._v(" "),t("li",[t("code",[a._v("oasis-node stake list")]),a._v(" lists all accounts with positive balance,")]),a._v(" "),t("li",[t("code",[a._v("oasis-node stake account info")]),a._v(" shows detailed account information,")]),a._v(" "),t("li",[t("code",[a._v("oasis-node stake account submit")]),a._v(" submits a pregenerated transaction given a\nfilename.")])]),a._v(" "),t("p",[a._v("In addition, the following commands generate transactions and are meant to be\nrun offline, because signing transactions requires a private key which "),t("strong",[a._v("should\nnot be accessible")]),a._v(" from outside in any way:")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("oasis-node stake account gen_transfer")])]),a._v(" "),t("li",[t("code",[a._v("oasis-node stake account gen_burn")])]),a._v(" "),t("li",[t("code",[a._v("oasis-node stake account gen_escrow")])]),a._v(" "),t("li",[t("code",[a._v("oasis-node stake account gen_reclaim_escrow")])])]),a._v(" "),t("h2",{attrs:{id:"staking-basics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#staking-basics"}},[a._v("#")]),a._v(" Staking basics")]),a._v(" "),t("p",[a._v("We will assume you followed previous node operators sections so you have "),t("code",[a._v("oasis-node")]),a._v("\nbinary available, a genesis file location stored in an environmental variable "),t("code",[a._v("$GENESIS_FILE_PATH")]),a._v(",\nand the private keypair of your entity in a directory "),t("code",[a._v("$ENTITY_DIR_PATH")]),a._v(".\nAdditionally, we will use "),t("code",[a._v("$ADDR")]),a._v(" containing the location of the internal socket,\nof the Oasis node, for example")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ADDR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("unix:/tmp/oasis-net-runner236357163/net-runner/network/client-0/internal.sock\n")])])]),t("p",[a._v("We will provide the "),t("code",[a._v("-a $ADDR")]),a._v(" parameter to any operation which requires\nconnection to the Oasis node. Conversely, "),t("code",[a._v("--genesis.file $GENESIS_FILE_PATH")]),a._v("\nand "),t("code",[a._v("--entity $ENTITY_DIR_PATH")]),a._v(" will be used for offline operations.")]),a._v(" "),t("p",[a._v("First, let's check out the native token of our platform:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake info -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDR")]),a._v("\nName: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Buffycoin"')]),a._v("\nSymbol: "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"BUF"')]),a._v("\nTotal supply: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("200000000000")]),a._v("\nCommon pool: "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nStaking threshold "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("entity"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nStaking threshold "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("validator"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nStaking threshold "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("compute"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nStaking threshold "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("storage"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(": "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])])]),t("p",[a._v("There is a native token named "),t("code",[a._v("Buffycoin")]),a._v(" with symbol "),t("code",[a._v("BUF")]),a._v(" with total supply of\n200 billion. All tokens are allocated in their respective accounts and no tokens\nare in the "),t("em",[a._v("common pool")]),a._v(". Finally we see no staking thresholds for any node kind\n(entity, validator, compute, storage).")]),a._v(" "),t("p",[a._v("Let's list all accounts with positive balance:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake list -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDR")]),a._v("\n4ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35\n")])])]),t("p",[a._v("There exists one such account "),t("code",[a._v("4ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35")]),a._v(".\nFor more information about the account, run:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake account info "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDR")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.account.id 4ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU="')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"general_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"100000000000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"escrow_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"100000000000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nonce"')]),a._v(":0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("We notice that:")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("id")]),a._v(" stores the Base64-encoded address of the account.")]),a._v(" "),t("li",[t("code",[a._v("general_balance")]),a._v(" is the number of tokens which can be spent by a transfer\ntransaction signed by the account's private key.")]),a._v(" "),t("li",[a._v("Each account can also serve as an escrow. "),t("code",[a._v("escrow_balance")]),a._v(" is the number of\ntokens this account contains as an escrow and which can be reclaimed by the\ndepositor. In our environment, both balances have 100 billion tokens.")]),a._v(" "),t("li",[a._v("Any outgoing transaction from the account must have an incremental "),t("code",[a._v("nonce")]),a._v(". In\nour case, the next outgoing transaction of the account should have "),t("code",[a._v("nonce: 0")]),a._v(".")])]),a._v(" "),t("h2",{attrs:{id:"example-burning-tokens"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-burning-tokens"}},[a._v("#")]),a._v(" Example: Burning tokens")]),a._v(" "),t("p",[a._v("Next, we will generate and sign our first transaction. Let's start with a "),t("em",[a._v("burn")]),a._v("\ntransaction, which destroys the given number of tokens. To generate a\nburn transaction of 2000 tokens, sign and store the transaction to file "),t("code",[a._v("b.json")]),a._v(",\ntype:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake account gen_burn "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --genesis.file "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$GENESIS_FILE_PATH")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --entity "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ENTITY_DIR_PATH")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.amount "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.file b.json "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.nonce "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.fee.gas "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.fee.amount "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("p",[a._v("We used the following parameters:")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("--stake.transaction.amount")]),a._v(" specifying the number of tokens,")]),a._v(" "),t("li",[t("code",[a._v("--stake.transaction.file")]),a._v(" the output filename of the transaction stored in\nJSON format,")]),a._v(" "),t("li",[t("code",[a._v("--stake.transaction.nonce")]),a._v(" the incremental nonce. Since this is our first\ntransaction which changes the account balance, "),t("code",[a._v("nonce")]),a._v(" equals "),t("code",[a._v("0")]),a._v(",")]),a._v(" "),t("li",[t("code",[a._v("--stake.transaction.fee.gas")]),a._v(" is the maximum amount of gas we allow this\ntransaction to spend,")]),a._v(" "),t("li",[t("code",[a._v("--stake.transaction.fee.amount")]),a._v(" is the fee in tokens we will pay for this\ntransaction.")])]),a._v(" "),t("p",[a._v("The above generation and signing of the transaction can be done offline.")]),a._v(" "),t("p",[a._v("To submit our transaction, we need to copy "),t("code",[a._v("b.json")]),a._v(" to a location accessible by\nthe online Oasis node (e.g. via ssh) and run on the server:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake account submit "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDR")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.account.id 4ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.file b.json\n")])])]),t("p",[a._v("Beside the node's address, the submit operation above requires:")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("--stake.transaction.file")]),a._v(" is the input filename of the transaction,")]),a._v(" "),t("li",[t("code",[a._v("--stake.account.id")]),a._v(" is the staking account which pays the transaction fee and\nserves as an escrow.")])]),a._v(" "),t("p",[a._v("Finally, let's check the new balance of the account:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake account info "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDR")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.account.id 4ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU="')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"general_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"99999998000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"escrow_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"100000000000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nonce"')]),a._v(":0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("Notice that "),t("code",[a._v("2000")]),a._v(" tokens have been correctly deducted from the "),t("code",[a._v("general_balance")]),a._v(".")]),a._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),t("p",[a._v("Usually, the new balance is seen immediately, but some transactions (for example\nescrow reclaiming) do not take effect until after a debonding period has elapsed,\nso you might need to wait a few blocks for the balances to update.")])]),a._v(" "),t("h2",{attrs:{id:"example-transferring-tokens"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-transferring-tokens"}},[a._v("#")]),a._v(" Example: Transferring tokens")]),a._v(" "),t("p",[a._v("Token transfer transactions transfer tokens from the signer's account to the\ngiven destination account. Let's generate a transfer transaction of 1000 tokens\nto account "),t("code",[a._v("5ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake account gen_transfer "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --genesis.file "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$GENESIS_FILE_PATH")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --entity "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ENTITY_DIR_PATH")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.amount "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.file t.json "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.nonce "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transfer.destination 5ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.fee.gas "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.fee.amount "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("p",[a._v("We used similar parameters to the ones used for generating the burn transaction:")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("--stake.transaction.amount")]),a._v(" is the number of tokens to transfer,")]),a._v(" "),t("li",[t("code",[a._v("--stake.transaction.file")]),a._v(" is the output filename,")]),a._v(" "),t("li",[t("code",[a._v("--stake.transaction.nonce")]),a._v(" is the incremental nonce. In our case, this is the\nsecond transaction on the account, thus "),t("code",[a._v("nonce")]),a._v(" equals "),t("code",[a._v("1")]),a._v(",")]),a._v(" "),t("li",[t("code",[a._v("--stake.transfer.destination")]),a._v(" is a hex-encoded address of the receiving\naccount of tokens.")])]),a._v(" "),t("p",[a._v("Let's submit the transaction stored in "),t("code",[a._v("t.json")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake account submit "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDR")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.account.id 4ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.file t.json\n")])])]),t("p",[a._v("Finally let's list all the accounts and their balances by adding "),t("code",[a._v("-v")]),a._v(" flag for\nincreased verbosity:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake list -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDR")]),a._v(" -v\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU="')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"general_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"99999997000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"escrow_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"100000000000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nonce"')]),a._v(":2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"XqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU="')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"general_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"escrow_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nonce"')]),a._v(":0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("Notice another 1000 tokens have been deducted from the first account and\ntransferred to the second one.")]),a._v(" "),t("h2",{attrs:{id:"example-escrowing-tokens-and-reclaiming-them"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example-escrowing-tokens-and-reclaiming-them"}},[a._v("#")]),a._v(" Example: Escrowing tokens and reclaiming them")]),a._v(" "),t("p",[a._v("In the third example we will put 3000 tokens to an escrow account\n"),t("code",[a._v("6ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35")]),a._v(" and then\nreclaim them. First, let's generate an escrow transaction and store it to "),t("code",[a._v("e.json")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake account gen_escrow "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --genesis.file "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$GENESIS_FILE_PATH")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --entity "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ENTITY_DIR_PATH")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.amount "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.file e.json "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.nonce "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.escrow.account 6ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.fee.gas "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.fee.amount "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("p",[a._v("Let's submit the escrow transaction and list the accounts:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake account submit "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDR")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.account.id 4ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.file e.json\n$ oasis-node stake list -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDR")]),a._v(" -v\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU="')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"general_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"99999994000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"escrow_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"100000000000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nonce"')]),a._v(":3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"XqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU="')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"general_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"escrow_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nonce"')]),a._v(":0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU="')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"general_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"escrow_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"3000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nonce"')]),a._v(":0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("Notice 3000 tokens have been deducted from the first account's "),t("code",[a._v("general_balance")]),a._v("\nand added to an "),t("code",[a._v("escrow_balance")]),a._v(" of the third account.")]),a._v(" "),t("p",[a._v("We reclaim 3000 escrowed tokens by generating the reclaim escrow transaction:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake account gen_reclaim_escrow "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --genesis.file "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$GENESIS_FILE_PATH")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --entity "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ENTITY_DIR_PATH")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.amount "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.file r.json "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.nonce "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.escrow.account 6ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.fee.gas "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1000")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.fee.amount "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])])]),t("p",[a._v("Let's submit it and in a few moments list the accounts:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ oasis-node stake account submit "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDR")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.account.id 4ea5328f943ef6f66daaed74cb0e99c3b1c45f76307b425003dbc7cb3638ed35 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    --stake.transaction.file r.json\n$ oasis-node stake list -a "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$ADDR")]),a._v(" -v\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"TqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU="')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"general_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"99999997000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"escrow_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"100000000000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nonce"')]),a._v(":4"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"XqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU="')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"general_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1000"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"escrow_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nonce"')]),a._v(":0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"id"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"bqUyj5Q+9vZtqu10yw6Zw7HEX3Ywe0JQA9vHyzY47TU="')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"general_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"escrow_balance"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0"')]),a._v(","),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"nonce"')]),a._v(":0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("Notice 3000 tokens have been reclaimed by the first account from the third\naccount's "),t("code",[a._v("escrow_balance")]),a._v(". The "),t("code",[a._v("general_balance")]),a._v(" of the first account was\ncorrectly updated and the "),t("code",[a._v("escrow_balance")]),a._v(" of the third account is now empty.")])])}),[],!1,null,null,null);s.default=e.exports}}]);