(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{224:function(e,t,o){"use strict";o.r(t);var s=o(0),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"wiping-node-state"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#wiping-node-state"}},[e._v("#")]),e._v(" Wiping Node State")]),e._v(" "),o("p",[e._v("In some cases you might want (or need) to do a full redeploy with clean state\nbefore deploying a new version of the network. This should never actually be\nused during a Mainnet unless there is some serious corruption, but your node\nwill have to spend time catching up to the rest of the network.")]),e._v(" "),o("p",[e._v("The following instructions assume that your "),o("code",[e._v("datadir")]),e._v(" is defined as\n"),o("code",[e._v("/serverdir/node")]),e._v(" in your node's config.")]),e._v(" "),o("h2",{attrs:{id:"state-wipe-and-keep-node-identity"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#state-wipe-and-keep-node-identity"}},[e._v("#")]),e._v(" State Wipe and Keep Node Identity")]),e._v(" "),o("ol",[o("li",[o("p",[e._v("Stop the "),o("code",[e._v("oasis-node")]),e._v(" server process (this will depend on your own deployment\nsetup)")])]),e._v(" "),o("li",[o("p",[e._v("Remove blockchain state")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("rm -rf /serverdir/node/tendermint\nrm -rf /serverdir/node/bleve-tag-index.bleve.db\nrm /serverdir/node/abci-mux-state.bolt.db\nrm /serverdir/node/persistent-store.db\n")])])])]),e._v(" "),o("li",[o("p",[e._v("Restart the oasis-node server process")])])]),e._v(" "),o("h2",{attrs:{id:"full-state-wipe"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#full-state-wipe"}},[e._v("#")]),e._v(" Full State Wipe")]),e._v(" "),o("div",{staticClass:"custom-block danger"},[o("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),o("p",[e._v("This is likely not what you want to do. This is destructive and might result in\nlosing private state required to operate the given node. "),o("strong",[e._v("USE AT YOUR OWN\nRISK.")])])]),e._v(" "),o("p",[e._v("A full state wipe will also mean that you'll need to generate a new node\nidentity (or copy the old one).")]),e._v(" "),o("ol",[o("li",[e._v("Stop the "),o("code",[e._v("oasis-node")]),e._v(" server process (this will depend on your own deployment\nsetup)")]),e._v(" "),o("li",[e._v("Remove the the "),o("code",[e._v("/serverdir/node")]),e._v(" directory.")]),e._v(" "),o("li",[e._v("Redeploy your node. You'll need to copy your Node artifacts or create brand\nnew ones.")])])])}),[],!1,null,null,null);t.default=n.exports}}]);